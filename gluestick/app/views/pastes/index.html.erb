<%= render 'sidebar' %>

<%= form_for @paste do |f| %>
    <div class="span9">
      <div class="well">
        <div id="validation-msg" class="alert alert-error" style="display:none;">
          <a class="close" data-dismiss="alert" href="#">x</a>
          <h4 class="alert-heading">Error</h4>
          <span>Paste cannot be null or empty</span>
        </div>
        <%= f.text_area(:content, :class => 'pasteArea span12') %>
        <input id="paste_button" type='button' class='btn btn-primary' value='Paste' onclick='validatePaste()'>
        <input id="clear_button" type='button' class='btn btn-primary disabled' value='Clear' onclick='clearPaste()'>
      </div><!--well-->
    </div> <!--span9-->
<% end %>
<script>

    $(document).ready(function() {
        var clearButton = $('#clear_button');

        var pasteContent = $('#paste_content');

        pasteContent.keyup(function(event){
            if(event.target.value.length) {
                clearButton.removeClass('disabled');
            }else {
                clearButton
                    .addClass('disabled')
                    .attr('disabled', 'disabled');
            }
        });

        if(pasteContent.val()) {
            clearButton.removeClass('disabled');
        }

    });

    function clearPaste() {
        if(!$('#clear_button').hasClass('disabled')){
            $('#paste_content').val('');
            $('#clear_button').addClass('disabled');
        }
    }

</script>